<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Vermenigvuldigen — oefenen met cijferen</title>

<style>
:root{
  --bg:#f7f8fb; --card:#fff; --ink:#111; --muted:#4b5563;
  --ok:#1ea97c; --bad:#d64545; --warn:#f59e0b;
  --line:#e5e7eb; --accent:#2563eb;
}
body{
  margin:0; background:var(--bg);
  font-family:Arial, sans-serif; color:var(--ink);
}
.wrap{ max-width:1000px; margin:auto; padding:20px; }
.card{
  background:#fff; padding:16px;
  border-radius:12px; border:1px solid var(--line);
  box-shadow:0 8px 24px rgba(0,0,0,.06);
}

.bar{ display:flex; gap:10px; flex-wrap:wrap; margin-bottom:10px; }

button{
  padding:10px 14px; border:none;
  border-radius:8px; color:#fff;
  background:var(--accent); cursor:pointer;
  font-weight:600;
}

.task{ font-size:22px; font-weight:700; margin:10px 0; }

.grid{ border-collapse:collapse; margin-top:10px; }
.grid td{
  border:1px solid var(--line);
  width:32px; height:36px; text-align:center;
}
.grid input{
  width:100%; height:100%;
  border:none; text-align:center;
  font-size:16px;
}

.ok{ background:#e6f7f1; padding:8px; border-radius:8px; }
.err{ background:#fde8e8; padding:8px; border-radius:8px; }
.warn{ background:#fff7ed; padding:8px; border-radius:8px; }
</style>
</head>

<body>
<div class="wrap">

<h1>Vermenigvuldigen — oefenen met cijferen</h1>

<div class="card">

<div class="bar">
<button id="btn-new">Nieuwe oefening</button>
<button id="btn-check">Nakijken</button>
</div>

<div class="task" id="task">—</div>

<div>
<label>Schatting:</label>
<input id="est" type="text">
<button id="btn-start">Start</button>
</div>

<div id="work" style="display:none">

<div id="grid"></div>

<div style="margin-top:10px">
<label>Eindantwoord:</label>
<input id="answer" type="text">
</div>

<div id="feedback" style="margin-top:10px"></div>

</div>
</div>
</div>

<script>
/* ================= CONFIG ================= */

const DIFFS = {
  makkelijk:{a:[1,2],b:[1,2],dec:[0,1]},
  gemiddeld:{a:[2,3],b:[1,3],dec:[0,2]},
  moeilijk:{a:[3,5],b:[2,3],dec:[0,2]}
};

let diff="moeilijk";
let current=null;

/* ================= HELPERS ================= */

function rand(a,b){
  return Math.floor(Math.random()*(b-a+1))+a;
}

function makeNumber(dig,dec){
  const d=rand(dig[0],dig[1]);
  const decimals=rand(dec[0],dec[1]);

  let int=rand(10**(d-1),10**d-1);

  if(decimals===0){
    return {shown:String(int),raw:String(int),decs:0};
  }

  let decPart=String(rand(0,10**decimals-1)).padStart(decimals,"0");

  return {
    shown:int+","+decPart,
    raw:String(int)+decPart,
    decs:decimals
  };
}

function insertComma(raw,decs){
  if(decs===0) return raw;
  if(raw.length<=decs){
    raw=raw.padStart(decs+1,"0");
  }
  return raw.slice(0,-decs)+","+raw.slice(-decs);
}

/* ================= NIEUWE OEFENING ================= */

function newExercise(){

  const cfg=DIFFS[diff];

  const a=makeNumber(cfg.a,cfg.dec);
  const b=makeNumber(cfg.b,cfg.dec);

  const product=String(Number(a.raw)*Number(b.raw));
  const decs=a.decs+b.decs;

  current={a,b,product,decs};

  document.getElementById("task").textContent=
    `${a.shown} × ${b.shown} =`;

  document.getElementById("est").value="";
  document.getElementById("answer").value="";
  document.getElementById("feedback").innerHTML="";
  document.getElementById("work").style.display="none";

  buildGrid();
}

/* ================= ROOSTER ================= */

function buildGrid(){

  const a=current.a.raw.split("");
  const b=current.b.raw.split("");

  const rows=b.length;
  const cols=a.length+rows;

  let html="<table class='grid'>";

  for(let r=0;r<rows;r++){
    html+="<tr>";
    for(let c=0;c<cols;c++){
      html+=`<td><input></td>`;
    }
    html+="</tr>";
  }

  html+="</table>";

  document.getElementById("grid").innerHTML=html;
}

/* ================= START ================= */

function startExercise(){
  const est=document.getElementById("est").value.trim();
  if(!est){
    alert("Vul eerst je schatting in");
    return;
  }
  document.getElementById("work").style.display="block";
}

/* ================= NAKIJKEN ================= */

function checkExercise(){

  const user=document.getElementById("answer").value.trim();

  const correct=insertComma(current.product,current.decs);

  const fb=document.getElementById("feedback");

  if(user.replace(".",
  ",")===correct){
    fb.innerHTML=`<div class="ok">Correct! ${correct}</div>`;
  }else{
    fb.innerHTML=`<div class="err">Fout. Correct antwoord: ${correct}</div>`;
  }
}

/* ================= EVENTS ================= */

document.getElementById("btn-new")
  .addEventListener("click",newExercise);

document.getElementById("btn-start")
  .addEventListener("click",startExercise);

document.getElementById("btn-check")
  .addEventListener("click",checkExercise);

/* init */
newExercise();
</script>

</body>
</html>
