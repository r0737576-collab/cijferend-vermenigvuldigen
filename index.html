<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Vermenigvuldigen — oefenen met cijferen</title>

<style>
:root{
  --bg:#f7f8fb; --card:#fff; --ink:#111;
  --line:#e5e7eb; --accent:#2563eb;
}
body{
  margin:0; background:var(--bg);
  font-family:Arial, sans-serif;
}
.wrap{ max-width:1000px; margin:auto; padding:20px; }
.card{
  background:#fff; padding:16px;
  border-radius:12px;
  border:1px solid var(--line);
}
.bar{ display:flex; gap:10px; flex-wrap:wrap; }

button{
  padding:10px 14px;
  border:none; border-radius:8px;
  background:var(--accent);
  color:#fff; font-weight:600;
  cursor:pointer;
}

.task{ font-size:22px; font-weight:700; margin:10px 0; }

.grid{ border-collapse:collapse; }
.grid td{
  border:1px solid var(--line);
  width:32px; height:36px;
}
.grid input{
  width:100%; height:100%;
  border:none; text-align:center;
  font-size:16px;
}

.ok{ background:#e6f7f1; padding:8px; border-radius:8px; }
.err{ background:#fde8e8; padding:8px; border-radius:8px; }

.nav{ margin-top:10px; display:flex; gap:10px; }
</style>
</head>

<body>
<div class="wrap">

<h1>Vermenigvuldigen — oefenen met cijferen</h1>

<div class="card">

<div class="bar">
<select id="difficulty">
<option value="makkelijk">Makkelijk</option>
<option value="gemiddeld">Gemiddeld</option>
<option value="moeilijk" selected>Moeilijk</option>
</select>

<button id="btn-new" onclick="newSet()">Nieuwe set (5)</button>
<button onclick="window.print()">Print</button>
</div>

<div id="counter"></div>
<div class="task" id="task"></div>

<label>Schatting:</label>
<input id="est">
<button id="btn-start">Start</button>

<div id="work" style="display:none">

<div id="grid"></div>

<div style="margin-top:10px">
<label>Eindantwoord:</label>
<input id="answer">
<button id="btn-check">Nakijken</button>
</div>

<div id="feedback" style="margin-top:10px"></div>

<div class="nav">
<button id="prev">Vorige</button>
<button id="next">Volgende</button>
</div>

</div>
</div>
</div>

<script>
/* ================= CONFIG ================= */

const DIFFS={
makkelijk:{a:[1,2],b:[1,2],dec:[0,1]},
gemiddeld:{a:[2,3],b:[1,3],dec:[0,2]},
moeilijk:{a:[3,5],b:[2,3],dec:[0,2]}
};

let diff="moeilijk";
let set=[];
let index=0;

/* ================= HELPERS ================= */

function rand(a,b){
return Math.floor(Math.random()*(b-a+1))+a;
}

function makeNumber(dig,dec){
const d=rand(dig[0],dig[1]);
const decimals=rand(dec[0],dec[1]);

let int=rand(10**(d-1),10**d-1);

if(decimals===0){
return{shown:String(int),raw:String(int),decs:0};
}

let decPart=String(rand(0,10**decimals-1))
.padStart(decimals,"0");

return{
shown:int+","+decPart,
raw:String(int)+decPart,
decs:decimals
};
}

function insertComma(raw,decs){
if(decs===0)return raw;
if(raw.length<=decs){
raw=raw.padStart(decs+1,"0");
}
return raw.slice(0,-decs)+","+raw.slice(-decs);
}

/* ================= SET ================= */


document.getElementById("btn-new").addEventListener("click", newSet);

set=[];

for(let i=0;i<5;i++){

const cfg=DIFFS[diff];

const a=makeNumber(cfg.a,cfg.dec);
const b=makeNumber(cfg.b,cfg.dec);

const product=String(Number(a.raw)*Number(b.raw));
const decs=a.decs+b.decs;

set.push({a,b,product,decs});
}

index=0;
render();
}

/* ================= RENDER ================= */

function render(){

const item=set[index];

document.getElementById("counter")
.textContent=`Oefening ${index+1} van 5`;

document.getElementById("task")
.textContent=`${item.a.shown} × ${item.b.shown} =`;

document.getElementById("est").value="";
document.getElementById("answer").value="";
document.getElementById("feedback").innerHTML="";
document.getElementById("work").style.display="none";

buildGrid(item);
}

/* ================= GRID ================= */

function buildGrid(item){

const a=item.a.raw.length;
const b=item.b.raw.length;

const rows=b;
const cols=a+b;

let html="<table class='grid'>";

for(let r=0;r<rows;r++){
html+="<tr>";
for(let c=0;c<cols;c++){
html+="<td><input></td>";
}
html+="</tr>";
}

html+="</table>";

document.getElementById("grid").innerHTML=html;
}

/* ================= START ================= */

function startExercise(){

if(!document.getElementById("est").value){
alert("Vul eerst je schatting in");
return;
}

document.getElementById("work").style.display="block";
}

/* ================= CHECK ================= */

function checkExercise(){

const item=set[index];

const correct=
insertComma(item.product,item.decs);

const user=
document.getElementById("answer")
.value.replace(".",",");

if(user===correct){
document.getElementById("feedback")
.innerHTML=`<div class="ok">Correct ✔ ${correct}</div>`;
}else{
document.getElementById("feedback")
.innerHTML=`<div class="err">Fout ✖ Correct: ${correct}</div>`;
}
}

/* ================= NAV ================= */

function nextEx(){
if(index<4){index++;render();}
}

function prevEx(){
if(index>0){index--;render();}
}

/* ================= EVENTS ================= */

document.getElementById("btn-new")
.addEventListener("click",newSet);

document.getElementById("btn-start")
.addEventListener("click",startExercise);

document.getElementById("btn-check")
.addEventListener("click",checkExercise);

document.getElementById("next")
.addEventListener("click",nextEx);

document.getElementById("prev")
.addEventListener("click",prevEx);

/* init */
newSet();
</script>

</body>
</html>
